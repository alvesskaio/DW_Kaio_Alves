<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dados econômicos atualizados para investidores - cotações, indicadores e mais">
    <title>Economia | Investimentos Inteligente</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
    <!-- Skip Link para acessibilidade -->
    <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>

    <header role="banner">
        <div class="container">
            <a href="../index.html" class="logo">
                <i class="fas fa-chart-line"></i> Investimentos Inteligentes
            </a>
            <nav role="navigation" aria-label="Menu principal">
                <button class="menu-toggle" aria-expanded="false" aria-controls="primary-menu" aria-label="Alternar menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="menu" id="primary-menu" role="menubar">
                    <li role="none"><a href="../index.html" role="menuitem">Home</a></li>
                    <li role="none"><a href="simulador.html" role="menuitem">Simulador</a></li>
                    <li role="none"><a href="economia.html" class="active" role="menuitem" aria-current="page">Economia</a></li>
                    <li role="none"><a href="investimentos.html" role="menuitem">Investimentos</a></li>
                    <li role="none"><a href="contato.html" role="menuitem">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content">
        <section class="page-header">
            <div class="container">
                <h1>Dados Econômicos</h1>
                <p>Informações atualizadas sobre economia e mercado financeiro</p>
            </div>
        </section>

        <section class="indicators">
            <div class="container">
                <div class="section-header">
                    <h2>Indicadores Econômicos</h2>
                    <p>Principais taxas e índices que impactam seus investimentos</p>
                </div>
                <div class="indicators-grid">
                    <div class="indicator-card">
                        <h3 class="indicator-title">Taxa Selic</h3>
                        <div class="indicator-value" id="selic-value">
                            <div class="loading-animation"></div>
                        </div>
                        <p class="indicator-desc">Taxa básica de juros da economia</p>
                    </div>
                    <div class="indicator-card">
                        <h3 class="indicator-title">IPCA (12 meses)</h3>
                        <div class="indicator-value" id="ipca-value">
                            <div class="loading-animation"></div>
                        </div>
                        <p class="indicator-desc">Índice oficial de inflação do Brasil</p>
                    </div>
                    <div class="indicator-card">
                        <h3 class="indicator-title">CDI</h3>
                        <div class="indicator-value" id="cdi-value">
                            <div class="loading-animation"></div>
                        </div>
                        <p class="indicator-desc">Certificado de Depósito Interbancário</p>
                    </div>
                    <div class="indicator-card">
                        <h3 class="indicator-title">PIB (variação)</h3>
                        <div class="indicator-value" id="pib-value">
                            <div class="loading-animation"></div>
                        </div>
                        <p class="indicator-desc">Produto Interno Bruto</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="exchange-rates">
            <div class="container">
                <div class="section-header">
                    <h2>Cotações de Moedas</h2>
                    <p>Acompanhe as principais moedas em relação ao Real Brasileiro</p>
                </div>
                <div class="real-time-panel">
                    <button id="refresh-currency-data" class="btn btn-outline btn-sm">
                        <i class="fas fa-sync-alt"></i> Atualizar Agora
                    </button>
                    <span class="auto-refresh-indicator">
                        <i class="fas fa-clock"></i> Atualização automática a cada 2 minutos
                    </span>
                </div>
                <div class="table-container">
                    <table id="currency-table">
                        <thead>
                            <tr>
                                <th>Moeda</th>
                                <th>Código</th>
                                <th>Compra</th>
                                <th>Venda</th>
                                <th>Variação</th>
                                <th>Atualizado em</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="6" class="loading-row">
                                    <div class="loading-animation"></div>
                                    <span>Carregando dados...</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="market-data">
            <div class="container">
                <div class="section-header">
                    <h2>Índices de Mercado</h2>
                    <p>Acompanhe o desempenho dos principais índices financeiros</p>
                </div>
                <div class="table-container">
                    <table id="indices-table">
                        <thead>
                            <tr>
                                <th>Índice</th>
                                <th>Pontos</th>
                                <th>Variação Diária</th>
                                <th>Variação Mensal</th>
                                <th>Variação Anual</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="5" class="loading-row">
                                    <div class="loading-animation"></div>
                                    <span>Carregando dados...</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="indicator-charts">
            <div class="container">
                <div class="section-header">
                    <h2>Evolução dos Indicadores</h2>
                    <p>Acompanhe a evolução dos principais indicadores econômicos nos últimos meses</p>
                </div>
                <div class="charts-container">
                    <div class="chart-wrapper">
                        <h3>Taxa Selic - Últimos 12 meses</h3>
                        <canvas id="selic-chart" width="400" height="250"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <h3>IPCA - Últimos 12 meses</h3>
                        <canvas id="ipca-chart" width="400" height="250"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-col">
                <h3>Sobre o Site</h3>
                <p>Simulador de Investimentos Inteligente é uma ferramenta educacional para ajudar na tomada de decisões financeiras.</p>
            </div>
            <div class="footer-col">
                <h3>Navegação</h3>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="simulador.html">Simulador</a></li>
                    <li><a href="economia.html">Economia</a></li>
                    <li><a href="investimentos.html">Investimentos</a></li>
                    <li><a href="contato.html">Contato</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Redes Sociais</h3>
                <div class="social-links">
                    <a href="#" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" aria-label="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" aria-label="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 Simulador de Investimentos Inteligente. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="../assets/js/main.js" type="module"></script>
    <script src="../assets/js/api.js" type="module"></script>
    <script src="../assets/js/chart.js" type="module"></script>
    <script src="../assets/js/economy.js" type="module"></script>
    <script src="../assets/js/accessibility.js"></script>

    <script type="module">
        import { updateEconomicIndicators, updateCurrencyTable, updateMarketIndicesTable } from '../assets/js/api.js';

        document.addEventListener('DOMContentLoaded', () => {
            // Adiciona botão de atualização para cotações
            const container = document.querySelector('.exchange-rates .container');
            if (container && !document.querySelector('.real-time-panel')) {
                const panel = document.createElement('div');
                panel.className = 'real-time-panel';
                panel.innerHTML = `
                    <button id="refresh-currency-data" class="btn btn-outline btn-sm">
                        <i class="fas fa-sync-alt"></i> Atualizar Cotações
                    </button>
                    <span class="auto-refresh-indicator">
                        <i class="fas fa-info-circle"></i> Dados atualizados automaticamente ao carregar a página
                    </span>
                `;

                const headerElement = container.querySelector('.section-header');
                container.insertBefore(panel, headerElement.nextSibling);
            }

            // Evento para o botão de atualização
            const refreshButton = document.getElementById('refresh-currency-data');
            if (refreshButton) {
                refreshButton.addEventListener('click', function() {
                    this.disabled = true;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Atualizando...';

                    // Atualiza tabelas
                    Promise.all([
                        updateCurrencyTable(),
                        updateMarketIndicesTable()
                    ]).then(() => {
                        this.disabled = false;
                        this.innerHTML = '<i class="fas fa-sync-alt"></i> Atualizar Cotações';
                    });
                });
            }
        });
    </script>
</body>
</html>
